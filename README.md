updated mnist code. code is separated across multiple files, model saving is better.

should in theory allow to have a more flexible model